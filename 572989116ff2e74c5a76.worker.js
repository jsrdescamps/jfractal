!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class r{constructor(t,e){this.re=t||0,this.im=e||0}toJSON(){return{_type:"Complex",re:this.re,im:this.im}}static revive(t){return new r(t.re,t.im)}plus(t){return this.re+=t.re,this.im+=t.im,this}minus(t){return this.re-=t.re,this.im-=t.im,this}times(t){let e=this.re*t.re-this.im*t.im;return this.im=this.re*t.im+this.im*t.re,this.re=e,this}div(t){let e=t.re*t.re+t.im*t.im,i=(this.re*t.re+this.im*t.im)/e;return this.im=(this.im*t.re-this.re*t.im)/e,this.re=i,this}conj(){return this.im=-this.im,this}abs(){return this.re=Math.abs(this.re),this.im=Math.abs(this.im),this}getSquare(){return this.re*this.re+this.im*this.im}getModule(){return Math.sqrt(this.re*this.re+this.im*this.im)}getCopy(){return new r(this.re,this.im)}getSym(){return new r(-this.re,-this.im)}}class s{calculate(t){var e=t.getCopy();return t.times(t).times(e).re-=1,t}toJSON(){return{_type:"NewtonEquation"}}}class o{calculate(t,e){return t.times(t).plus(e)}toJSON(){return{_type:"MandelbrotEquation"}}}class n{calculate(t,e){let i=t.getCopy();return t.times(t).times(i).plus(e)}toJSON(){return{_type:"MandelCubicEquation"}}}class a{calculate(t,e){return t.times(t).times(t).plus(e)}toJSON(){return{_type:"MandelQuarticEquation"}}}class h{calculate(t,e){return t.abs().times(t).minus(e)}toJSON(){return{_type:"BurningShipEquation"}}}class l{calculate(t,e){return t.conj().times(t).plus(e)}toJSON(){return{_type:"TricornEquation"}}}class m{static revive(t){if("NewtonEquation"==t._type)return new s;if("MandelbrotEquation"==t._type)return new o;if("MandelCubicEquation"==t._type)return new n;if("MandelQuarticEquation"==t._type)return new a;if("TricornEquation"==t._type)return new l;if("BurningShipEquation"==t._type)return new h;throw"Equation revive not implemented !"}}class u{constructor(t,e,i,r){this.equation=t,this.radius=i,this.maxIter=e,this.c=r||null}toJSON(){return{_type:"BailoutAlgo",equation:this.equation.toJSON(),maxIter:this.maxIter,radius:this.radius,c:this.c?this.c.toJSON():null}}static revive(t){return new u(m.revive(t.equation),t.maxIter,t.radius,t.c?r.revive(t.c):null)}iterate(t){var e=0,i=this.c||new r(t.re,t.im);for(this.c||(t.re=0,t.im=0);t.getSquare()<=this.radius&&e<this.maxIter;)this.equation.calculate(t,i),e++;return{iter:e,complex:t}}}class c{constructor(t,e,i){this.equation=t,this.maxIter=e,this.epsilon=i}toJSON(){return{_type:"NewtonAlgo",equation:this.equation.toJSON(),maxIter:this.maxIter,epsilon:this.epsilon}}static revive(t){return new c(m.revive(t.equation),t.maxIter,t.epsilon)}derivative(t,e,i){var r=t.getCopy();return i(t.plus(e)).minus(i(r)).div(e)}iterate(t){var e,i=0,s=new r(1e-6,1e-6);do{e=t.getCopy().minus(t.minus(this.equation.calculate(t.getCopy()).div(this.derivative(t.getCopy(),s,this.equation.calculate)))),i++}while(e.getSquare()>this.epsilon&&i<this.maxIter);return{iter:i,complex:e}}}class v{static revive(t){if("BailoutAlgo"==t._type)return u.revive(t);if("NewtonAlgo"==t._type)return c.revive(t);throw"Algo revive not implemented !"}}class p{constructor(t=0,e=0,i=0,r=0){this.r=t,this.g=e,this.b=i,this.a=r}delta(t){return new p(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}rgb(){return`rgb(${this.r},${this.g},${this.b})`}toJSON(){return{_type:"Color",r:this.r,g:this.g,b:this.b,a:this.a}}static revive(t){return new p(t.r,t.g,t.b,t.a)}static get(t){return e=>{switch(t){default:case"white":return new p(255,255,255,e);case"black":return new p(0,0,0,e);case"red":return new p(255,0,0,e);case"green":return new p(0,255,0,e);case"blue":return new p(0,0,255,e);case"yellow":return new p(255,255,0,e);case"cyan":return new p(0,255,255,e);case"magenta":return new p(255,0,255,e);case"indigo":return new p(128,0,255,e);case"pink":return new p(255,0,128,e);case"orange":return new p(255,128,0,e);case"apple":return new p(128,255,0,e);case"manganese":return new p(0,128,255,e);case"guppie":return new p(0,255,128,e);case"purple":return new p(128,0,128,e);case"teal":return new p(0,128,128,e);case"olive":return new p(128,128,0,e);case"coral":return new p(255,128,128,e)}}}}class g{constructor(t,e){if(e.length<=1)throw"Two colors minimum.";this.map=[],this.numSteps=t,this.colors=e,this.init()}init(){let t,e,i,r,s=1/(this.colors.length-1),o=this,n=e=>parseInt(o.colors[t][e]+i*r[e],10);for(let o=0;o<this.numSteps;o++){let a=o/(this.numSteps-1);t=Math.floor(a/s),e=Math.min(this.colors.length-1,t+1),i=(a-t*s)/s,r=this.colors[e].delta(this.colors[t]),this.map.push(new p(n("r"),n("g"),n("b"),n("a")))}}getColor(t){let e=Math.max(0,Math.min(1,t)),i=Math.floor(e*(this.map.length-1));return this.map[i]}toJSON(){return{_type:"ColorMap",numSteps:this.numSteps,colors:this.colors.map(function(t){return t.toJSON()})}}static revive(t){return new g(t.numSteps,t.colors.map(function(t){return p.revive(t)}))}static get(t){return e=>{switch(t){default:case"whitetoblack":return new g(e,[new p(255,255,255,255),new p(0,0,0,255)]);case"rgb":return new g(e,[new p(255,0,0,255),new p(0,255,0,255),new p(0,0,255,255)]);case"rainbow":return new g(e,[new p(255,0,0,255),new p(255,128,0,255),new p(255,255,0,255),new p(0,255,0,255),new p(128,0,128,255),new p(128,0,255,255),new p(255,0,0,255)]);case"night":return new g(e,[new p(0,0,102,255),new p(255,255,255,255),new p(255,102,0,255),new p(0,0,102,255)]);case"blacknwhite":return new g(e,[new p(255,255,255,255),new p(0,0,0,255),new p(255,255,255,255),new p(0,0,0,255)]);case"fire":return new g(e,[new p(0,0,0,255),new p(255,0,0,255),new p(255,255,0,255),new p(255,0,0,255)]);case"sky":return new g(e,[new p(0,0,120,255),new p(200,255,255,255),new p(0,0,120,255)])}}}}class w{constructor(t,e,i){this.algorithm=t,this.mainColor=e,this.bailoutColor=i}getColor(t){return this.algorithm.iterate(t).iter==this.algorithm.maxIter?this.mainColor:this.bailoutColor}toJSON(){return{_type:"SimpleColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),bailoutColor:this.bailoutColor.toJSON()}}static revive(t){return new w(v.revive(t.algorithm),p.revive(t.mainColor),p.revive(t.bailoutColor))}}class C{constructor(t,e,i){this.algorithm=t,this.mainColor=e,this.palette=i}getColor(t){var e=this.algorithm.iterate(t);return e.iter==this.algorithm.maxIter?this.mainColor:this.palette.getColor(e.iter/this.algorithm.maxIter)}toJSON(){return{_type:"BailoutColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),palette:this.palette.toJSON()}}static revive(t){return new C(v.revive(t.algorithm),p.revive(t.mainColor),g.revive(t.palette))}}class S{constructor(t,e,i){this.algorithm=t,this.mainColor=e,this.palette=i}getColor(t){let e=this.algorithm.iterate(t);return e.iter==this.algorithm.maxIter?this.mainColor:this.palette.getColor((e.iter+1-Math.log(Math.log(e.complex.getModule())/Math.log(2))/Math.log(2))/this.algorithm.maxIter)}toJSON(){return{_type:"SmoothBailoutColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),palette:this.palette.toJSON()}}static revive(t){return new S(v.revive(t.algorithm),p.revive(t.mainColor),g.revive(t.palette))}}class y{constructor(t,e,i,r){this.algorithm=t,this.mainColor=e,this.positiveColor=i,this.negativeColor=r}getColor(t){var e=this.algorithm.iterate(t);return e.iter==this.algorithm.maxIter?this.mainColor:e.complex.im>0?this.positiveColor:this.negativeColor}toJSON(){return{_type:"BinaryColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),positiveColor:this.positiveColor.toJSON(),negativeColor:this.negativeColor.toJSON()}}static revive(t){return new y(v.revive(t.algorithm),p.revive(t.mainColor),p.revive(t.positiveColor),p.revive(t.negativeColor))}}class f{constructor(t,e,i){this.algorithm=t,this.mainColor=e,this.palette=i}getColor(t){var e=this.algorithm.iterate(t);return e.iter==this.algorithm.maxIter?this.mainColor:this.palette.getColor((Math.atan2(e.complex.im,e.complex.re)+Math.PI)/(2*Math.PI))}toJSON(){return{_type:"AngleColoring",algorithm:this.algorithm.toJSON(),mainColor:this.mainColor.toJSON(),palette:this.palette.toJSON()}}static revive(t){return new f(v.revive(t.algorithm),p.revive(t.mainColor),g.revive(t.palette))}}class d{constructor(t){t?this.m=t.slice(0):this.reset()}getCopy(){return new d(this.m)}reset(){return this.m=[1,0,0,1,0,0],this}multiply(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],n=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=o,this.m[5]=n,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,r=-this.m[2]*t,s=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),n=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=o,this.m[5]=n,this}rotate(t){var e=Math.cos(t),i=Math.sin(t),r=this.m[0]*e+this.m[2]*i,s=this.m[1]*e+this.m[3]*i,o=this.m[0]*-i+this.m[2]*e,n=this.m[1]*-i+this.m[3]*e;return this.m[0]=r,this.m[1]=s,this.m[2]=o,this.m[3]=n,this}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}transformPoint(t,e){var i=t,r=e;return[t=i*this.m[0]+r*this.m[2]+this.m[4],e=i*this.m[1]+r*this.m[3]+this.m[5]]}}let O=null;self.onmessage=function(t){let e={row:t.data.row,colors:[]},i=new d(t.data.m);O||(O=class{static revive(t){if("SimpleColoring"==t._type)return w.revive(t);if("BailoutColoring"==t._type)return C.revive(t);if("SmoothBailoutColoring"==t._type)return S.revive(t);if("BinaryColoring"==t._type)return y.revive(t);if("AngleColoring"==t._type)return f.revive(t);throw"Coloring revive not implemented !"}}.revive(t.data.coloring));for(let s=0;s<t.data.width;s++){let o=i.transformPoint(s,t.data.row);e.colors[s]=O.getColor(new r(o[0],o[1]))}postMessage(e)}}]);